import{s as ae,f as y,a as B,l as E,g as I,h as U,c as P,z as D,m as G,d as h,j as g,i as w,v as M,n as Y,C as N,J as z,H as re,e as W,E as oe,F as R,D as F,G as ce,o as _e,A as me}from"./scheduler.7c577333.js";import{S as ue,i as fe,g as de,t as J,c as pe,a as q,b as he,d as ve,m as be,e as we}from"./index.8ddd727e.js";import{e as Z}from"./each.e59479a4.js";import{f as ke,c as Ce,e as ge,d as Te}from"./constants.874e0cc3.js";import{b as x,C as $,r as K,f as ee}from"./helpers.59cd3fb0.js";function ye(u){let e,n=K(u[0].text)+"",l;return{c(){e=new re(!1),l=W(),this.h()},l(t){e=oe(t,!1),l=W(),this.h()},h(){e.a=l},m(t,o){e.m(n,t,o),w(t,l,o)},p(t,o){o&1&&n!==(n=K(t[0].text)+"")&&e.p(n)},d(t){t&&(h(l),e.d())}}}function Ie(u){let e,n=K(u[0].text)+"",l,t,o="<br/>",s,a,r,p;return{c(){e=new re(!1),l=B(),t=y("p"),t.innerHTML=o,s=B(),a=y("div"),r=y("object"),this.h()},l(_){e=oe(_,!1),l=P(_),t=I(_,"P",{"data-svelte-h":!0}),D(t)!=="svelte-pntvnr"&&(t.innerHTML=o),s=P(_),a=I(_,"DIV",{class:!0});var m=U(a);r=I(m,"OBJECT",{title:!0,data:!0,class:!0});var v=U(r);v.forEach(h),m.forEach(h),this.h()},h(){e.a=l,g(r,"title","super"),g(r,"data",p=u[0].embedLink),g(r,"class","svelte-1yp19wq"),g(a,"class","embedVideo svelte-1yp19wq")},m(_,m){e.m(n,_,m),w(_,l,m),w(_,t,m),w(_,s,m),w(_,a,m),M(a,r)},p(_,m){m&1&&n!==(n=K(_[0].text)+"")&&e.p(n),m&1&&p!==(p=_[0].embedLink)&&g(r,"data",p)},d(_){_&&(e.d(),h(l),h(t),h(s),h(a))}}}function Le(u){let e,n="<br/>",l,t,o,s,a="<br/>",r,p,_=u[0].reconciliationFrom<new Date().getTime()/1e3&&u[3]==null,m,v,f,c=u[3]>0&&te(u),d=_&&le(u);return{c(){e=y("p"),e.innerHTML=n,l=B(),t=y("input"),o=B(),s=y("p"),s.innerHTML=a,r=B(),c&&c.c(),p=B(),d&&d.c(),m=W(),this.h()},l(i){e=I(i,"P",{"data-svelte-h":!0}),D(e)!=="svelte-pntvnr"&&(e.innerHTML=n),l=P(i),t=I(i,"INPUT",{class:!0,type:!0,placeholder:!0,min:!0,max:!0,step:!0}),o=P(i),s=I(i,"P",{"data-svelte-h":!0}),D(s)!=="svelte-pntvnr"&&(s.innerHTML=a),r=P(i),c&&c.l(i),p=P(i),d&&d.l(i),m=W(),this.h()},h(){g(t,"class","myInputField"),g(t,"type","number"),g(t,"placeholder","... enter investment amount ..."),g(t,"min","1"),g(t,"max","369"),g(t,"step","1")},m(i,b){w(i,e,b),w(i,l,b),w(i,t,b),R(t,u[3]),w(i,o,b),w(i,s,b),w(i,r,b),c&&c.m(i,b),w(i,p,b),d&&d.m(i,b),w(i,m,b),v||(f=F(t,"input",u[10]),v=!0)},p(i,b){b&8&&z(t.value)!==i[3]&&R(t,i[3]),i[3]>0?c?c.p(i,b):(c=te(i),c.c(),c.m(p.parentNode,p)):c&&(c.d(1),c=null),b&9&&(_=i[0].reconciliationFrom<new Date().getTime()/1e3&&i[3]==null),_?d?d.p(i,b):(d=le(i),d.c(),d.m(m.parentNode,m)):d&&(d.d(1),d=null)},d(i){i&&(h(e),h(l),h(t),h(o),h(s),h(r),h(p),h(m)),c&&c.d(i),d&&d.d(i),v=!1,f()}}}function Ae(u){let e,n="<br/>",l,t,o,s,a="<br/>",r,p,_,m,v=u[2]>0&&ne(u);return{c(){e=y("p"),e.innerHTML=n,l=B(),t=y("input"),o=B(),s=y("p"),s.innerHTML=a,r=B(),v&&v.c(),p=W(),this.h()},l(f){e=I(f,"P",{"data-svelte-h":!0}),D(e)!=="svelte-pntvnr"&&(e.innerHTML=n),l=P(f),t=I(f,"INPUT",{class:!0,type:!0,placeholder:!0,min:!0,max:!0,step:!0}),o=P(f),s=I(f,"P",{"data-svelte-h":!0}),D(s)!=="svelte-pntvnr"&&(s.innerHTML=a),r=P(f),v&&v.l(f),p=W(),this.h()},h(){g(t,"class","myInputField"),g(t,"type","number"),g(t,"placeholder","... enter donation amount ..."),g(t,"min","1"),g(t,"max","369"),g(t,"step","1")},m(f,c){w(f,e,c),w(f,l,c),w(f,t,c),R(t,u[2]),w(f,o,c),w(f,s,c),w(f,r,c),v&&v.m(f,c),w(f,p,c),_||(m=F(t,"input",u[8]),_=!0)},p(f,c){c&4&&z(t.value)!==f[2]&&R(t,f[2]),f[2]>0?v?v.p(f,c):(v=ne(f),v.c(),v.m(p.parentNode,p)):v&&(v.d(1),v=null)},d(f){f&&(h(e),h(l),h(t),h(o),h(s),h(r),h(p)),v&&v.d(f),_=!1,m()}}}function te(u){let e,n="Appreciate",l,t,o="<br/>",s,a,r="Depreciate",p,_,m="<br/>",v,f;return{c(){e=y("button"),e.textContent=n,l=B(),t=y("p"),t.innerHTML=o,s=B(),a=y("button"),a.textContent=r,p=B(),_=y("p"),_.innerHTML=m,this.h()},l(c){e=I(c,"BUTTON",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-14js5mh"&&(e.textContent=n),l=P(c),t=I(c,"P",{"data-svelte-h":!0}),D(t)!=="svelte-pntvnr"&&(t.innerHTML=o),s=P(c),a=I(c,"BUTTON",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-i3r496"&&(a.textContent=r),p=P(c),_=I(c,"P",{"data-svelte-h":!0}),D(_)!=="svelte-pntvnr"&&(_.innerHTML=m),this.h()},h(){g(e,"class","inside"),g(a,"class","inside")},m(c,d){w(c,e,d),w(c,l,d),w(c,t,d),w(c,s,d),w(c,a,d),w(c,p,d),w(c,_,d),v||(f=[F(e,"click",u[11]),F(a,"click",u[12])],v=!0)},p:N,d(c){c&&(h(e),h(l),h(t),h(s),h(a),h(p),h(_)),v=!1,ce(f)}}}function le(u){let e,n="Reconcile",l,t;return{c(){e=y("button"),e.textContent=n,this.h()},l(o){e=I(o,"BUTTON",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1xo9ajr"&&(e.textContent=n),this.h()},h(){g(e,"class","inside")},m(o,s){w(o,e,s),l||(t=F(e,"click",u[13]),l=!0)},p:N,d(o){o&&h(e),l=!1,t()}}}function ne(u){let e,n="Donate",l,t;return{c(){e=y("button"),e.textContent=n,this.h()},l(o){e=I(o,"BUTTON",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-nciw23"&&(e.textContent=n),this.h()},h(){g(e,"class","inside")},m(o,s){w(o,e,s),l||(t=F(e,"click",u[9]),l=!0)},p:N,d(o){o&&h(e),l=!1,t()}}}function Be(u){let e,n,l,t="<br/>",o,s,a,r=u[0].upVoteScore+"",p,_,m,v,f=u[0].downVoteScore+"",c,d,i,b,k,j="<br/><br/>";function A(C,T){return C[0].embedLink!==""?Ie:ye}let O=A(u),L=O(u);function V(C,T){return C[0].reconciled?Ae:Le}let S=V(u),H=S(u);return{c(){e=y("div"),L.c(),n=B(),l=y("p"),l.innerHTML=t,o=B(),s=y("span"),a=E("Ups: "),p=E(r),_=E(` vs.
	`),m=y("span"),v=E("Downs: "),c=E(f),d=B(),H.c(),b=B(),k=y("p"),k.innerHTML=j,this.h()},l(C){e=I(C,"DIV",{class:!0});var T=U(e);L.l(T),n=P(T),l=I(T,"P",{"data-svelte-h":!0}),D(l)!=="svelte-pntvnr"&&(l.innerHTML=t),o=P(T),s=I(T,"SPAN",{class:!0});var Q=U(s);a=G(Q,"Ups: "),p=G(Q,r),Q.forEach(h),_=G(T,` vs.
	`),m=I(T,"SPAN",{class:!0});var X=U(m);v=G(X,"Downs: "),c=G(X,f),X.forEach(h),d=P(T),H.l(T),T.forEach(h),b=P(C),k=I(C,"P",{"data-svelte-h":!0}),D(k)!=="svelte-5q9igk"&&(k.innerHTML=j),this.h()},h(){g(s,"class","score-up svelte-1yp19wq"),g(m,"class","score-down svelte-1yp19wq"),g(e,"class",i="card "+(u[0].reconciled?"reconciled":"open")+" svelte-1yp19wq")},m(C,T){w(C,e,T),L.m(e,null),M(e,n),M(e,l),M(e,o),M(e,s),M(s,a),M(s,p),M(e,_),M(e,m),M(m,v),M(m,c),M(e,d),H.m(e,null),w(C,b,T),w(C,k,T)},p(C,[T]){O===(O=A(C))&&L?L.p(C,T):(L.d(1),L=O(C),L&&(L.c(),L.m(e,n))),T&1&&r!==(r=C[0].upVoteScore+"")&&Y(p,r),T&1&&f!==(f=C[0].downVoteScore+"")&&Y(c,f),S===(S=V(C))&&H?H.p(C,T):(H.d(1),H=S(C),H&&(H.c(),H.m(e,null))),T&1&&i!==(i="card "+(C[0].reconciled?"reconciled":"open")+" svelte-1yp19wq")&&g(e,"class",i)},i:N,o:N,d(C){C&&(h(e),h(b),h(k)),L.d(),H.d()}}}function Pe(u,e,n){let{asset:l}=e,{contract:t}=e,{provider:o}=e,{publicWalletAddressOfVisitor:s}=e,a,r=!0,p;async function _(k,j){const A=x(p.toString()),O=await o.getSigner(),V=await new $(ke,Ce,O).getBuyPrice(A),S=BigInt(p)*V,H=BigInt(await o.getBalance(s));try{const T=await t.appreciateAsset.estimateGas(k,A,V,{value:BigInt(S)})*(await o.getFeeData()).gasPrice;if(H<S+BigInt(T))throw new Error("you might enter a smaller amount");j?(console.log(k,A,V),await t.appreciateAsset(k,A,V,{value:BigInt(S)})):await t.depreciateAsset(k,A,V,{value:BigInt(S)}),r=!1}catch(C){alert(C)}}async function m(k){const j=await o.getSigner(),A=new $(ge,Te,j),O=x(a.toString()),L=await A.getBuyPrice(O),V=BigInt(a)*L,S=BigInt(await o.getBalance(s)),H=await t.assetCreators(k);try{const T=await A.donate.estimateGas(H,O,L,{value:BigInt(V)})*(await o.getFeeData()).gasPrice;S<V+BigInt(T)?alert("you might enter a smaller amount"):(console.log(`donating to ${H} ${O} ${L}`),await A.donate(H,O,L,{value:BigInt(V)}))}catch(C){alert(C.message)}}function v(){a=z(this.value),n(2,a)}const f=()=>m(l.id);function c(){p=z(this.value),n(3,p)}const d=()=>_(l.id,!0),i=()=>_(l.id,!1),b=()=>t.reconcile(l.id);return u.$$set=k=>{"asset"in k&&n(0,l=k.asset),"contract"in k&&n(1,t=k.contract),"provider"in k&&n(6,o=k.provider),"publicWalletAddressOfVisitor"in k&&n(7,s=k.publicWalletAddressOfVisitor)},[l,t,a,p,_,m,o,s,v,f,c,d,i,b]}class He extends ue{constructor(e){super(),fe(this,e,Pe,Be,ae,{asset:0,contract:1,provider:6,publicWalletAddressOfVisitor:7})}}function se(u,e,n){const l=u.slice();return l[13]=e[n],l[15]=n,l}function Ve(u){let e;return{c(){e=E("... loading data from blockchain ...")},l(n){e=G(n,"... loading data from blockchain ...")},m(n,l){w(n,e,l)},p:N,i:N,o:N,d(n){n&&h(e)}}}function Me(u){let e,n,l=Z(u[4]),t=[];for(let s=0;s<l.length;s+=1)t[s]=ie(se(u,l,s));const o=s=>J(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=W()},m(s,a){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,a);w(s,e,a),n=!0},p(s,a){if(a&23){l=Z(s[4]);let r;for(r=0;r<l.length;r+=1){const p=se(s,l,r);t[r]?(t[r].p(p,a),q(t[r],1)):(t[r]=ie(p),t[r].c(),q(t[r],1),t[r].m(e.parentNode,e))}for(de(),r=l.length;r<t.length;r+=1)o(r);pe()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)q(t[a]);n=!0}},o(s){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)J(t[a]);n=!1},d(s){s&&h(e),me(t,s)}}}function ie(u){let e,n;return e=new He({props:{asset:u[13],contract:u[0],provider:u[2],publicWalletAddressOfVisitor:u[1]}}),{c(){he(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,t){be(e,l,t),n=!0},p(l,t){const o={};t&16&&(o.asset=l[13]),t&1&&(o.contract=l[0]),t&4&&(o.provider=l[2]),t&2&&(o.publicWalletAddressOfVisitor=l[1]),e.$set(o)},i(l){n||(q(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){we(e,l)}}}function Oe(u){let e,n,l,t,o="<br/>",s,a,r,p,_,m;const v=[Me,Ve],f=[];function c(d,i){return d[5]?0:1}return a=c(u),r=f[a]=v[a](u),{c(){e=y("div"),n=y("input"),l=B(),t=y("p"),t.innerHTML=o,s=B(),r.c(),this.h()},l(d){e=I(d,"DIV",{class:!0});var i=U(e);n=I(i,"INPUT",{class:!0,type:!0,placeholder:!0}),l=P(i),t=I(i,"P",{"data-svelte-h":!0}),D(t)!=="svelte-pntvnr"&&(t.innerHTML=o),s=P(i),r.l(i),i.forEach(h),this.h()},h(){g(n,"class","myInputField"),g(n,"type","text"),g(n,"placeholder","... filter ..."),n.autofocus=!0,g(e,"class","assets svelte-1t5v6hi")},m(d,i){w(d,e,i),M(e,n),R(n,u[3]),M(e,l),M(e,t),M(e,s),f[a].m(e,null),p=!0,n.focus(),_||(m=[F(n,"input",u[8]),F(n,"keydown",u[6])],_=!0)},p(d,[i]){i&8&&n.value!==d[3]&&R(n,d[3]);let b=a;a=c(d),a===b?f[a].p(d,i):(de(),J(f[b],1,1,()=>{f[b]=null}),pe(),r=f[a],r?r.p(d,i):(r=f[a]=v[a](d),r.c()),q(r,1),r.m(e,null))},i(d){p||(q(r),p=!0)},o(d){J(r),p=!1},d(d){d&&h(e),f[a].d(),_=!1,ce(m)}}}function De(u,e,n){let{contract:l}=e,{publicWalletAddressOfVisitor:t}=e,{provider:o}=e,{projectID:s}=e,a="",r=[],p=[],_=!1,m=!1;_e(async()=>{v()});async function v(){if(s===0){let i=0;const b=await l.projectCounter();for(r=[],n(5,_=!1);i<b;)i++,await f(i)}else await f(s);n(4,p=[...r]),n(5,_=!0)}async function f(i){const b=await l.getProjectAssets(i);let k=0;for(;k<b.length;){let j=await l.assets(b[k]);const A={id:b[k],text:j.text,upVoteScore:Number(ee(j.upVoteScore)),downVoteScore:Number(ee(j.downVoteScore)),reconciliationFrom:Number(j.reconciliationFrom),reconciled:j.reconciled,embedLink:""},O=A.text.indexOf("https://rumble.com/embed/");if(O!==-1){const L=A.text.substr(O,A.text.length-1);console.log(L);const V=L.indexOf(" "),S=A.text.substr(O,V);console.log(S),V===-1?A.embedLink=L:A.embedLink=L.substr(0,V)}r.push(A),k++}}const c=()=>{n(4,p=[...r]),m===!1&&(m=!0,setTimeout(()=>{const i=[];for(const b of p)JSON.stringify(b).toLowerCase().indexOf(a.toLowerCase())!==-1&&i.push(b);n(4,p=[...i]),m=!1},1e3*1))};function d(){a=this.value,n(3,a)}return u.$$set=i=>{"contract"in i&&n(0,l=i.contract),"publicWalletAddressOfVisitor"in i&&n(1,t=i.publicWalletAddressOfVisitor),"provider"in i&&n(2,o=i.provider),"projectID"in i&&n(7,s=i.projectID)},[l,t,o,a,p,_,c,s,d]}class Ee extends ue{constructor(e){super(),fe(this,e,De,Oe,ae,{contract:0,publicWalletAddressOfVisitor:1,provider:2,projectID:7})}}export{Ee as A};
